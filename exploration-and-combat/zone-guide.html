<!--
title: Zone Guide
description: Discover how to get from zone A to B.
published: true
date: 2025-03-03T16:03:43.853Z
tags: 
editor: code
dateCreated: 2025-02-26T19:33:55.088Z
-->

{{}}

Search For Zone Links
Allow Bazaar Portal
From:
<input list="zones" name="from" id="from">
To:
<input list="zones" name="to" id="to">
Submit
<script src="zone-guide.js"></script> {{}}
<script>
/********************************************************************
 * 1. Classes: PriorityQueue + World
 ********************************************************************/
let isBazaarAllowed = true;

class PriorityQueue {
  constructor() {
    this.values = [];
  }
  enqueue(val, priority) {
    this.values.push({ val, priority });
    this.sort();
  }
  dequeue() {
    return this.values.shift();
  }
  isEmpty() {
    return this.values.length === 0;
  }
  sort() {
    this.values.sort((a, b) => a.priority - b.priority);
  }
}

class World {
  constructor() {
    this.adjacencyList = {};
    this.fullNames = {};
    this.notes = {};
  }

  addZone(shortName, fullName) {
    if (!this.adjacencyList[shortName]) {
      this.adjacencyList[shortName] = [];
      this.fullNames[shortName] = fullName;
    }
  }

  addZoneLine(source, destination, weight, note = '') {
    this.adjacencyList[source].push({ node: destination, weight, note });
    this.notes[source + destination] = note;
  }

  addBiZoneLine(source, destination, weight, note = '') {
    this.adjacencyList[source].push({ node: destination, weight, note });
    this.adjacencyList[destination].push({ node: source, weight, note });
    this.notes[source + destination] = note;
    this.notes[destination + source] = note;
  }

  findShortestPath(start, end) {
    const nodes = new PriorityQueue();
    const distances = {};
    const previous = {};
    let shortestPath = [];
    let smallest;

    // Initialize distances and queue
    for (let node in this.adjacencyList) {
      if (node === start) {
        distances[node] = 0;
        nodes.enqueue(node, 0);
      } else {
        distances[node] = Infinity;
        nodes.enqueue(node, Infinity);
      }
      previous[node] = null;
    }

    // Dijkstra-like search
    while (!nodes.isEmpty()) {
      smallest = nodes.dequeue().val;

      if (smallest === end) {
        // Trace back
        while (previous[smallest]) {
          shortestPath.push(smallest);
          smallest = previous[smallest];
        }
        break;
      }

      if (smallest || distances[smallest] !== Infinity) {
        for (let neighbor of this.adjacencyList[smallest]) {
          let note = this.notes[smallest + neighbor.node];
          // Skip "use Bazaar Portal" if disabled
          if (note === 'use Bazaar Portal AA to' && !isBazaarAllowed) {
            continue;
          }

          let candidate = distances[smallest] + neighbor.weight;
          if (candidate < distances[neighbor.node]) {
            distances[neighbor.node] = candidate;
            previous[neighbor.node] = smallest;
            nodes.enqueue(neighbor.node, candidate);
          }
        }
      }
    }

    return shortestPath.concat(smallest).reverse();
  }
}

/********************************************************************
 * 2. Create a world object, add zones and connections
 ********************************************************************/
const w = new World();

// Example zone definitions:
w.addZone("qeynos", "South Qeynos");
w.addZone("qeynos2", "North Qeynos");
w.addZone("qeytoqrg", "Qeynos Hills");
w.addZone("blackburrow", "BlackBurrow");
w.addZone("everfrost", "Everfrost Peaks");
// Add as many as needed...
// w.addZone(...)

// Add adjacency lines:
w.addBiZoneLine("qeytosrg", "qeynos2", 2);
w.addBiZoneLine("qeynos2",  "qeynos",   2);
// etc. ...
// Keep adding your adjacency lines

/********************************************************************
 * 3. Attach to the form, load zone <option>s, and handle submit
 ********************************************************************/
document.addEventListener("DOMContentLoaded", function () {
  // 3a. Populate the <select> elements
  const fromSelect = document.getElementById("from");
  const toSelect = document.getElementById("to");
  const resultsDiv = document.getElementById("results");

  const zoneKeys = Object.keys(w.adjacencyList);
  zoneKeys.forEach(zone => {
    // create <option> for each
    let optFrom = document.createElement("option");
    optFrom.value = zone;
    optFrom.text = w.fullNames[zone];
    fromSelect.appendChild(optFrom);

    let optTo = document.createElement("option");
    optTo.value = zone;
    optTo.text = w.fullNames[zone];
    toSelect.appendChild(optTo);
  });

  // 3b. On submit, run the path logic
  const searchForm = document.getElementById("searchForm");
  searchForm.addEventListener("submit", (e) => {
    e.preventDefault();
    let fromValue = fromSelect.value;
    let toValue = toSelect.value;
    let isBazaarChk = document.getElementById("isBazaarPortalAllowed");
    isBazaarAllowed = isBazaarChk.checked;

    if (!fromValue || !toValue) {
      resultsDiv.innerHTML = "Please select a valid start and end zone.";
      return;
    }
    if (fromValue === toValue) {
      resultsDiv.innerHTML = "You're already in <b>" + w.fullNames[fromValue] + "</b>!";
      return;
    }

    // Run the pathfinding
    let path = w.findShortestPath(fromValue, toValue);
    if (!path.length) {
      resultsDiv.innerHTML = "No route found from <b>" + w.fullNames[fromValue] +
                             "</b> to <b>" + w.fullNames[toValue] + "</b>.";
      return;
    }

    // 3c. Build the output
    let output = "To get from <b>" + w.fullNames[fromValue] + "</b> to <b>" +
                 w.fullNames[toValue] + "</b>:<br><ol>";
    let prev = path[0];
    for (let i = 1; i < path.length; i++) {
      let next = path[i];
      let note = w.notes[prev + next] || "zone to";
      output += `<li>From <b>${w.fullNames[prev]} (${prev})</b> 
                  ${note} <b>${w.fullNames[next]} (${next})</b></li>`;
      prev = next;
    }
    output += "</ol>";
    resultsDiv.innerHTML = output;
  });
});
</script>